<!DOCTYPE html>
<html lang="en">
<head>
    <title>JavTube</title>
</head>
<body>
<div class="page type-interior pluginConfigurationPage"
     data-require="emby-input,emby-button,emby-select,emby-checkbox"
     data-role="page"
     id="JavTubeConfigurationPage">
    <div data-role="content">
        <div class="content-primary">
            <h1>JavTube</h1>
            <form id="JavTubeConfigForm">
                <div class="inputContainer">
                    <label class="inputeLabel inputLabelUnfocused" for="txtServer">Server</label>
                    <input id="txtServer" is="emby-input" name="txtServer" required type="text"/>
                    <div class="fieldDescription">URL of JavTube Server.</div>
                </div>
                <div class="inputContainer">
                    <label class="inputeLabel inputLabelUnfocused" for="txtToken">Token</label>
                    <input id="txtToken" is="emby-input" name="txtToken" type="text"/>
                    <div class="fieldDescription">Access Token of JavTube Server.</div>
                </div>
                <div class="checkboxContainer checkboxContainer-withDescripton">
                    <label class="emby-checkbox-label">
                        <input id="chkEnableTrailers" is="emby-checkbox" name="chkEnableTrailers" type="checkbox"/>
                        <span>Enable Trailers</span>
                    </label>
                </div>
                <div class="selectContainer">
                    <label class="selectLabel" for="sltTranslationMode">Translation Mode</label>
                    <select class="emby-select-withcolor emby-select" id="sltTranslationMode" is="emby-select"
                            name="sltTranslationMode">
                        <option id="optTranslationMode0" value="0">Disabled</option>
                        <option id="optTranslationMode1" value="1">Title</option>
                        <option id="optTranslationMode2" value="2">Tagline</option>
                        <option id="optTranslationMode3" value="3">Title and Tagline</option>
                        <option id="optTranslationMode4" value="4">Overview</option>
                        <option id="optTranslationMode5" value="5">Title and Overview</option>
                        <option id="optTranslationMode6" value="6">Tagline and Overview</option>
                        <option id="optTranslationMode7" value="7">Translate All</option>
                    </select>
                </div>
                <div class="selectContainer">
                    <label class="selectLabel" for="sltTranslationEngine">Translation Engine</label>
                    <select class="emby-select-withcolor emby-select" id="sltTranslationEngine" is="emby-select"
                            name="sltTranslationEngine">
                        <option id="optTranslationEngineBaidu" value="Baidu">Baidu</option>
                        <option id="optTranslationEngineGoogle" value="Google">Google</option>
                    </select>
                </div>
                <div class="inputContainer">
                    <label class="inputeLabel inputLabelUnfocused" for="txtBaiduAppId">Baidu APP ID</label>
                    <input id="txtBaiduAppId" is="emby-input" name="txtBaiduAppId" type="text"/>
                    <div class="fieldDescription">*Required if using Baidu as the translation engine.</div>
                </div>
                <div class="inputContainer">
                    <label class="inputeLabel inputLabelUnfocused" for="txtBaiduAppKey">Baidu APP Key</label>
                    <input id="txtBaiduAppKey" is="emby-input" name="txtBaiduAppKey" type="text"/>
                    <div class="fieldDescription">*Required if using Baidu as the translation engine.</div>
                </div>
                <div class="inputContainer">
                    <label class="inputeLabel inputLabelUnfocused" for="txtGoogleApiKey">Google API Key</label>
                    <input id="txtGoogleApiKey" is="emby-input" name="txtGoogleApiKey" type="text"/>
                    <div class="fieldDescription">*Required if using Google as the translation engine.</div>
                </div>
                <div class="inputContainer">
                    <label class="inputLabel inputLabel-float inputLabelUnfocused" for="txtGenreSubstitutionText">Genre
                        Substitution Text</label>
                    <textarea rows="10" is="emby-input" type="text" id="txtGenreSubstitutionText"
                              name="txtGenreSubstitutionText" class="emby-input"></textarea>
                    <div class="fieldDescription"></div>
                </div>
                <div>
                    <button class="raised button-submit block" is="emby-button" type="submit">
                        <span>Save</span></button>
                </div>
            </form>
        </div>
    </div>
    <script type="text/javascript">
        var JavTubePluginConfig = {
            uniquePluginId: "01cc53ec-c415-4108-bbd4-a684a9801a32"
        };

        $('#JavTubeConfigurationPage').on('pageshow', function () {
            Dashboard.showLoadingMsg();
            ApiClient.getPluginConfiguration(JavTubePluginConfig.uniquePluginId).then(function (config) {
                $('#txtServer').val(config.Server).change();
                $('#txtToken').val(config.Token).change();
                $('#chkEnableTrailers').prop('checked', config.EnableTrailers);
                $('#sltTranslationMode').val(config.TranslationMode).change();
                $('#sltTranslationEngine').val(config.TranslationEngine).change();
                $('#txtBaiduAppId').val(config.BaiduAppId).change();
                $('#txtBaiduAppKey').val(config.BaiduAppKey).change();
                $('#txtGoogleApiKey').val(config.GoogleApiKey).change();
                $('#txtGenreSubstitutionText').val(config.GenreSubstitutionText).change();
                Dashboard.hideLoadingMsg();
            });
        });

        $('#JavTubeConfigForm').on('submit', function () {
            Dashboard.showLoadingMsg();
            ApiClient.getPluginConfiguration(JavTubePluginConfig.uniquePluginId).then(function (config) {
                config.Server = $('#txtServer').val();
                config.Token = $('#txtToken').val();
                config.EnableTrailers = $('#chkEnableTrailers').prop('checked');
                config.TranslationMode = $('#sltTranslationMode').val();
                config.TranslationEngine = $('#sltTranslationEngine').val();
                config.BaiduAppId = $('#txtBaiduAppId').val();
                config.BaiduAppKey = $('#txtBaiduAppKey').val();
                config.GoogleApiKey = $('#txtGoogleApiKey').val();
                config.GenreSubstitutionText = $('#txtGenreSubstitutionText').val();
                ApiClient.updatePluginConfiguration(JavTubePluginConfig.uniquePluginId, config).then(
                    Dashboard.processPluginConfigurationUpdateResult);
            });
            return false;
        });
    </script>
</div>
</body>
</html>